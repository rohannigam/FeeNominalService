@FeeNominalService_HostAddress = https://localhost:7139

### Authentication Endpoints

### Note: Request Signing
# All API requests (except initial API key generation) require a signature for authentication.
# The signature is calculated using the following components:
# 1. Timestamp: Current UTC time in ISO 8601 format
# 2. Nonce: A unique random string for each request
# 3. Request Body: The JSON body of the request
# 4. Secret: The API key secret (not the API key itself)
#
# Signature Calculation:
# 1. Concatenate: timestamp + nonce + requestBody
# 2. Create HMAC-SHA256 hash using the secret key
# 3. Base64 encode the hash
#
# Required Headers:
# X-API-Key: Your API key
# X-Timestamp: Current UTC time in ISO 8601 format
# X-Nonce: Unique random string
# X-Signature: The calculated signature

### Generate Initial API Key
POST {{FeeNominalService_HostAddress}}/api/v1/onboarding/apikey/initial-generate
Content-Type: application/json

{
  "merchantId": "DEV001",
  "description": "Initial API key for development",
  "rateLimit": 1000,
  "allowedEndpoints": ["*"],
  "onboardingMetadata": {
    "adminUserId": "admin",
    "onboardingReference": "DEV-001"
  }
}

### Generate Additional API Key
POST {{FeeNominalService_HostAddress}}/api/v1/onboarding/apikey/generate
Content-Type: application/json
X-API-Key: your-api-key-here
X-Timestamp: {{$datetime iso8601}}
X-Nonce: {{$guid}}
X-Signature: calculated-signature-here

{
  "merchantId": "DEV001",
  "description": "Additional API key for development",
  "rateLimit": 1000,
  "allowedEndpoints": ["*"]
}

### List API Keys
GET {{FeeNominalService_HostAddress}}/api/v1/onboarding/apikey/list?merchantId=DEV001
X-API-Key: your-api-key-here
X-Timestamp: {{$datetime iso8601}}
X-Nonce: {{$guid}}
X-Signature: calculated-signature-here

### Update API Key
POST {{FeeNominalService_HostAddress}}/api/v1/onboarding/apikey/update
Content-Type: application/json
X-API-Key: your-api-key-here
X-Timestamp: {{$datetime iso8601}}
X-Nonce: {{$guid}}
X-Signature: calculated-signature-here

{
  "merchantId": "DEV001",
  "description": "Updated API key description",
  "rateLimit": 2000,
  "allowedEndpoints": ["/api/v1/sales/*", "/api/v1/refunds/*"]
}

### Revoke API Key
POST {{FeeNominalService_HostAddress}}/api/v1/onboarding/apikey/revoke
Content-Type: application/json
X-API-Key: your-api-key-here
X-Timestamp: {{$datetime iso8601}}
X-Nonce: {{$guid}}
X-Signature: calculated-signature-here

{
  "merchantId": "DEV001",
  "apiKey": "api-key-to-revoke"
}

### Surcharge Endpoints

### Calculate Surcharge
POST {{FeeNominalService_HostAddress}}/api/v1/surchargefee/calculate
Content-Type: application/json
X-API-Key: your-api-key-here
X-Timestamp: {{$datetime iso8601}}
X-Nonce: {{$guid}}
X-Signature: calculated-signature-here

{
  "amount": 100.00,
  "sTxId": "test-transaction-123",
  "mTxId": "merchant-transaction-456",
  "country": "US",
  "region": "CA"
}

### Batch Calculate Surcharges
POST {{FeeNominalService_HostAddress}}/api/v1/surchargefee/calculate-batch
Content-Type: application/json
X-API-Key: your-api-key-here
X-Timestamp: {{$datetime iso8601}}
X-Nonce: {{$guid}}
X-Signature: calculated-signature-here

[
  {
    "amount": 100.00,
    "sTxId": "test-transaction-123",
    "mTxId": "merchant-transaction-456",
    "country": "US",
    "region": "CA"
  },
  {
    "amount": 200.00,
    "sTxId": "test-transaction-789",
    "mTxId": "merchant-transaction-012",
    "country": "US",
    "region": "NY"
  }
]

### Sale Endpoints

### Process Sale
POST {{FeeNominalService_HostAddress}}/api/v1/sales/process
Content-Type: application/json
X-API-Key: your-api-key-here
X-Timestamp: {{$datetime iso8601}}
X-Nonce: {{$guid}}
X-Signature: calculated-signature-here

{
  "sTxId": "test-sale-123",
  "amount": 150.00,
  "currency": "USD",
  "mTxId": "merchant-sale-456"
}

### Batch Process Sales
POST {{FeeNominalService_HostAddress}}/api/v1/sales/process-batch
Content-Type: application/json
X-API-Key: your-api-key-here
X-Timestamp: {{$datetime iso8601}}
X-Nonce: {{$guid}}
X-Signature: calculated-signature-here

[
  {
    "sTxId": "test-sale-123",
    "amount": 150.00,
    "currency": "USD",
    "mTxId": "merchant-sale-456"
  },
  {
    "sTxId": "test-sale-789",
    "amount": 250.00,
    "currency": "USD",
    "mTxId": "merchant-sale-012"
  }
]

### Refund Endpoints

### Process Refund
POST {{FeeNominalService_HostAddress}}/api/v1/refunds/process
Content-Type: application/json
X-API-Key: your-api-key-here
X-Timestamp: {{$datetime iso8601}}
X-Nonce: {{$guid}}
X-Signature: calculated-signature-here

{
  "sTxId": "test-refund-123",
  "amount": 50.00,
  "mTxId": "merchant-refund-456",
  "cardToken": "card-token-123"
}

### Batch Process Refunds
POST {{FeeNominalService_HostAddress}}/api/v1/refunds/process-batch
Content-Type: application/json
X-API-Key: your-api-key-here
X-Timestamp: {{$datetime iso8601}}
X-Nonce: {{$guid}}
X-Signature: calculated-signature-here

[
  {
    "sTxId": "test-refund-123",
    "amount": 50.00,
    "mTxId": "merchant-refund-456",
    "cardToken": "card-token-123"
  },
  {
    "sTxId": "test-refund-789",
    "amount": 75.00,
    "mTxId": "merchant-refund-012",
    "cardToken": "card-token-456"
  }
]
